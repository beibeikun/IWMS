# 系统设置功能说明

## 功能概述

系统设置功能允许用户自定义IWMS应用的默认参数和界面选项，提供个性化的使用体验。

## 设置项目

### 基本设置

#### 默认输出路径
- **功能**: 设置文件处理后的默认输出文件夹
- **类型**: 文件夹路径
- **默认值**: 空（每次手动选择）

#### 默认压缩模式
- **功能**: 设置图片压缩的默认模式
- **选项**: 
  - 最长边模式：按像素压缩，保持宽高比
  - 最大体积模式：按文件大小压缩
- **默认值**: 最长边模式

#### 默认最长边
- **功能**: 设置最长边模式的默认像素数
- **范围**: 0-10000像素
- **默认值**: 1920像素
- **说明**: 0表示不压缩

#### 默认文件大小
- **功能**: 设置最大体积模式的默认文件大小
- **范围**: 0-10000KB
- **默认值**: 500KB
- **说明**: 0表示不压缩

### 处理设置

#### 默认文件类型
- **功能**: 设置默认处理的文件类型
- **选项**:
  - 仅图片文件：只处理图片格式
  - 所有文件：处理所有类型文件
- **默认值**: 仅图片文件

#### 默认递归扫描
- **功能**: 设置是否默认包含子文件夹
- **选项**:
  - 包含子文件夹：递归扫描所有子目录
  - 仅当前文件夹：只扫描指定目录
- **默认值**: 包含子文件夹

#### 默认冲突处理
- **功能**: 设置文件冲突时的处理策略
- **选项**:
  - 跳过：不处理冲突文件
  - 覆盖：直接覆盖目标文件
  - 追加后缀：自动添加后缀避免冲突
- **默认值**: 跳过

#### 多线程处理
- **功能**: 设置是否启用多线程处理
- **选项**:
  - 启用：使用多线程提升性能
  - 禁用：使用单线程处理
- **默认值**: 启用

### 界面设置

#### 侧边栏默认状态
- **功能**: 设置应用启动时侧边栏的状态
- **选项**:
  - 展开：侧边栏默认展开
  - 折叠：侧边栏默认折叠
- **默认值**: 展开

#### 自动保存设置
- **功能**: 设置是否自动保存用户设置
- **选项**:
  - 启用：自动保存设置变更
  - 禁用：手动保存设置
- **默认值**: 启用

## 操作功能

### 保存设置
- 将当前设置保存到本地配置文件
- 设置文件位置：`用户数据目录/settings.json`

### 重置默认
- 将所有设置恢复为默认值
- 需要用户确认操作

### 导出设置
- 将当前设置导出为JSON文件
- 可选择保存位置和文件名

### 导入设置
- 从JSON文件导入设置
- 支持选择任意JSON格式的设置文件

## 技术实现

### 数据存储
- 使用JSON格式存储设置
- 文件位置：`app.getPath('userData')/settings.json`
- 自动创建和加载配置文件

### IPC通信
- 通过Electron IPC进行主进程和渲染进程通信
- 安全的API暴露，避免直接访问Node.js模块

### 错误处理
- 完整的异常捕获和处理
- 用户友好的错误提示
- 设置加载失败时使用默认值

## 使用场景

### 个人定制
- 根据个人使用习惯设置默认参数
- 减少重复配置的时间

### 团队协作
- 导出设置文件分享给团队成员
- 统一团队的默认配置

### 环境迁移
- 在新设备上导入原有设置
- 保持使用习惯的一致性

## 注意事项

1. **设置优先级**: 用户设置的默认值会覆盖系统默认值
2. **文件权限**: 确保应用有权限读写设置文件
3. **格式兼容**: 导入的设置文件必须是有效的JSON格式
4. **版本兼容**: 不同版本的设置格式可能不兼容

## 未来扩展

### 计划功能
- 设置分类管理
- 设置搜索功能
- 设置模板功能
- 云端同步设置

### 高级选项
- 自定义快捷键
- 主题设置
- 语言设置
- 插件配置
