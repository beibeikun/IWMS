# IWMS 代码注释规范说明

## 📝 注释规范概述

本项目采用规范且完整的中文注释，确保代码的可读性和可维护性。所有注释都遵循统一的格式和标准。

## 🎯 注释原则

### 1. 完整性
- 每个文件都有文件头注释，说明文件用途和功能
- 每个函数都有详细的参数说明和返回值说明
- 复杂的代码逻辑都有行内注释解释

### 2. 规范性
- 使用 JSDoc 格式的函数注释
- 中文注释使用简体中文，表达清晰准确
- 注释与代码保持同步更新

### 3. 实用性
- 注释重点解释"为什么"而不是"是什么"
- 对于复杂的业务逻辑提供详细说明
- 对于配置项说明其作用和影响

## 📁 已添加注释的文件

### 核心代码文件
- ✅ `electron/main.js` - Electron 主进程文件
- ✅ `electron/preload.js` - 预加载脚本
- ✅ `src/main.js` - Vue 应用入口
- ✅ `vite.config.js` - Vite 构建配置

### 脚本文件
- ✅ `start.sh` - 开发模式启动脚本
- ✅ `debug-start.sh` - 调试启动脚本

### 配置文件
- ✅ `index.html` - HTML 入口文件
- ⚠️ `package.json` - 项目配置（JSON 不支持注释）

## 🔧 注释格式示例

### 文件头注释
```javascript
/**
 * IWMS 智能文件管理解决方案 - 主进程文件
 * 
 * 本文件是 Electron 应用的主进程，负责：
 * - 创建和管理主窗口
 * - 处理 IPC 通信
 * - 文件操作（重命名、压缩、扫描等）
 * - 多线程图片处理
 * - 应用生命周期管理
 * 
 * @author IWMS Team
 * @version 1.0.0
 */
```

### 函数注释
```javascript
/**
 * 创建主窗口
 * 
 * 负责：
 * - 配置窗口属性（尺寸、标题、图标等）
 * - 设置 Web 安全策略
 * - 加载前端页面
 * - 配置开发/生产环境
 * - 设置窗口显示时机
 */
function createWindow() {
  // 创建新的浏览器窗口实例
  mainWindow = new BrowserWindow({
    width: 1200,                        // 窗口宽度
    height: 1000,                       // 窗口高度
    show: false,                        // 延迟显示，避免白屏闪烁
    // ... 其他配置
  })
}
```

### 行内注释
```javascript
// 检测是否为开发模式
// 通过多种方式判断：环境变量、打包状态等
const isDev = process.env.NODE_ENV === 'development' || 
               process.env.IS_DEV === 'true' || 
               !app.isPackaged

if (isDev) {
  console.log('开发模式：连接到 Vite 开发服务器...')
  // 开发模式：连接到 Vite 开发服务器
  mainWindow.loadURL('http://localhost:5173')
}
```

## 🚫 不支持注释的文件类型

### JSON 文件
- `package.json` - npm 项目配置
- `package-lock.json` - 依赖锁定文件
- 其他 `.json` 配置文件

**原因**: JSON 规范不支持注释，添加注释会导致解析错误。

### 二进制文件
- 图片文件 (`.png`, `.jpg`, `.ico` 等)
- 字体文件 (`.ttf`, `.woff` 等)
- 其他二进制格式文件

## 📋 注释检查清单

在添加或修改代码时，请确保：

- [ ] 新文件有完整的文件头注释
- [ ] 新函数有详细的 JSDoc 注释
- [ ] 复杂逻辑有行内注释说明
- [ ] 配置项有用途说明
- [ ] 注释使用简体中文
- [ ] 注释与代码保持同步

## 🔍 注释质量要求

### 优秀注释的特征
1. **准确性** - 注释内容与代码实际行为一致
2. **完整性** - 覆盖所有重要的代码逻辑
3. **清晰性** - 使用简洁明了的语言表达
4. **时效性** - 注释随代码更新而更新

### 避免的注释问题
1. **过时注释** - 注释与代码不同步
2. **冗余注释** - 注释只是重复代码内容
3. **模糊注释** - 注释表达不清，容易误解
4. **缺失注释** - 复杂逻辑缺少必要的说明

## 📚 相关文档

- [QUICK_TROUBLESHOOTING.md](./QUICK_TROUBLESHOOTING.md) - 快速排错清单
- [PROJECT_STRUCTURE.md](./PROJECT_STRUCTURE.md) - 项目结构说明
- [README.md](./README.md) - 项目总体介绍

## 🤝 贡献指南

如果您要为代码添加注释，请：

1. 遵循本规范中的注释格式
2. 使用简体中文进行注释
3. 确保注释的准确性和完整性
4. 在提交代码前检查注释质量

---

*最后更新: 2024年*
*维护者: IWMS Team*
